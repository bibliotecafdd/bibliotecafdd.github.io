<html>

<head>
  <title>Crear C칩digo</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="reserva" id="search-container">

  <h1>Crear C칩digo</h1>
  <form>
    <label>Categor칤a+Nombre del libro+Autor/es+A침o</label><br><br>
    <input class="button-value" type="text" id="datos" name="datos" />
    <button class="button-reserva"  type="button" onclick="copyNum(crearCodigo(datos.value),document.getElementById('myDiv').style.display='block')">Crear codigo</button>
  </form>
  </div>
  <script>
        function copyNum() {
      let copyText = document.querySelector('#codigo');
      navigator.clipboard.writeText(copyText.innerText); 
    }

    function crearCodigo(datos) {
      function capFirstL(string) {
       string = string.replace("	"," ")
        let words = string.split(" ");
        let capitalizedWords = words.map((word) => word[0].toUpperCase());
        return capitalizedWords.join("");
      }
      var data1 = capFirstL(datos)
      function deleteNumbers(str) {
        return str.replace(/[0-9]/g, '');
      }
      var data2 = deleteNumbers(data1)
      function getLastNumber(str) {
        return str.match(/\d+$/)[0];
      }
      let codigo = data2 + getLastNumber(datos);
      document.querySelector('#codigo').innerHTML = codigo;

    }
  </script>
  <p>#<span id="codigo"></span></p>
  <div id="myDiv" style="display:none;"><i>C칩digo copiado 游늶</i></div>
</body>

</html>